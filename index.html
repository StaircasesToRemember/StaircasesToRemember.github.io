<!DOCTYPE html>
<html>
<body>

<canvas id="arena" width="400" height="600" style="border:2px solid black;"></canvas>

<script>
const canvas = document.getElementById("arena");
const ctx = canvas.getContext("2d");

// Tower class
class Tower {
  constructor(x, y, hp, team) {
    this.x = x;
    this.y = y;
    this.hp = hp;
    this.maxHp = hp;
    this.team = team;
  }

  draw(ctx) {
    console.log("Inside draw for", this.team, this.x, this.y); // DEBUG
    ctx.fillStyle = this.team === "player" ? "blue" : "red";
    ctx.fillRect(this.x - 25, this.y - 25, 50, 50);
    ctx.fillStyle = "green";
    ctx.fillRect(this.x - 25, this.y - 30, 50 * (this.hp / this.maxHp), 5);
  }
}

// Create towers
const playerTowers = [
  new Tower(50, 100, 1000, "player"),
  new Tower(200, 50, 2000, "player"),
  new Tower(350, 100, 1000, "player")
];

const enemyTowers = [
  new Tower(50, 500, 1000, "enemy"),
  new Tower(200, 550, 2000, "enemy"),
  new Tower(350, 500, 1000, "enemy")
];

console.log("Player towers:", playerTowers);
console.log("Enemy towers:", enemyTowers);

// Draw loop
function drawArena() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let t of playerTowers) {
    console.log("Drawing player tower object:", t); // DEBUG
    t.draw(ctx);
  }

  for (let t of enemyTowers) {
    console.log("Drawing enemy tower object:", t); // DEBUG
    t.draw(ctx);
  }

  requestAnimationFrame(drawArena);
}

drawArena();
</script>

</body>
</html>
